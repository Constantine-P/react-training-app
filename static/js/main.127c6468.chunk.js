(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(30)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),s=n.n(c),i=(n(17),n(18),n(19),n(7)),o=n(11),l=n(2),u=n(3),h=n(1),m=n(5),p=n(4),f=n(6),d=n.n(f),g=n(8);n(21);var v=function(e){return r.a.createElement("img",{className:"ticket-logo",src:"https://pics.avs.io/99/36/".concat(e.carrier,".png"),alt:e.carrier+"-logo"})};n(22);var b=function(e){return r.a.createElement("div",{className:"segments-cell"},r.a.createElement("h5",{className:"segments-cell__title"},e.title),r.a.createElement("div",{className:"segments-cell__content"},e.content))};n(23);function k(e){return e<10?"0".concat(e):"".concat(e)}function E(e,t){var n=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:n>1&&n<5?t[1]:1===n?t[0]:t[2]}var C=function(e){var t=e.row,n=t.date,a=t.duration,c=t.origin,s=t.destination,i=t.stops,o=new Date(Date.parse(n)),l=new Date(o);l.setMinutes(o.getMinutes()+a);var u=[k(o.getHours()),k(o.getMinutes())],h=u[0],m=u[1],p=[k(l.getHours()),k(l.getMinutes())],f=p[0],d=p[1],g="".concat(h,":").concat(m," \u2013 ").concat(f,":").concat(d),v="".concat(Math.floor(a/60),"\u0447 ").concat(a%60,"\u043c"),C=i.join(", "),j=i.length,_=[{title:"".concat(c," \u2013 ").concat(s),content:g},{title:"\u0432 \u043f\u0443\u0442\u0438",content:v},{title:"".concat(j>0?j:"\u0431\u0435\u0437"," ").concat(E(j,["\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"])),content:C}];return r.a.createElement("div",{className:"segments-row"},_.map((function(e,t){return r.a.createElement(b,{title:e.title,content:e.content,key:t})})))};n(24);var j=function(e){return r.a.createElement("div",{className:"segments"},e.segments.map((function(e,t){return r.a.createElement(C,{row:e,key:t})})))};var _=function(e){var t=e.ticket,n=t.price,a=t.carrier,c=t.segments;return r.a.createElement("article",{className:"ticket"},r.a.createElement("h1",{className:"ticket__price"},n.toLocaleString()," \u0420"),r.a.createElement(v,{carrier:a}),r.a.createElement(j,{segments:c}))},x=(n(25),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={tickets:[]},Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchTickets();case 2:t=e.sent,a.setState({tickets:t});case 4:case"end":return e.stop()}}),e)})))(),a}return Object(u.a)(n,[{key:"sortFunc",value:function(){return 0===this.props.sort?function(e,t){return e.price-t.price}:1===this.props.sort?function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)}:0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tickets"},this.state.tickets.filter((function(t){var n=t.segments[0].stops.length,a=t.segments[1].stops.length;return!!(e.props.filter.all||e.props.filter[n]&&a<=n||e.props.filter[a]&&n<=a)})).sort(this.sortFunc()).map((function(e,t){return r.a.createElement("div",{className:"tickets__ticket",key:t},r.a.createElement(_,{ticket:e}))})))}}],[{key:"fetchTickets",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search").then((function(e){return e.json()}));case 2:return t=e.sent,n=t.searchId,e.next=6,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(n)).then((function(e){return e.json()}));case 6:return a=e.sent,(r=a.tickets).length=100,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(r.a.Component)),O=(n(26),["\u0441\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0451\u0432\u044b\u0439","\u0441\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"]),N=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleItemChange=a.handleItemChange.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleItemChange",value:function(e){this.props.onChange(Number(e.target.id))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sort-filter"},O.map((function(t,n){return r.a.createElement("label",{className:"sort-filter__item",key:n},r.a.createElement("input",{className:"sort-filter__radio",type:"radio",name:"sort-filter",checked:n===e.props.sortIndex,onChange:e.handleItemChange,id:n}),r.a.createElement("div",{className:"sort-filter__item-view"},t))})))}}]),n}(r.a.Component),y=(n(27),n(28),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.props.onChange(e.target.name)}},{key:"render",value:function(){return r.a.createElement("label",{className:"check-box"},r.a.createElement("input",{className:"check-box__input",type:"checkbox",name:this.props.name,checked:this.props.checked,onChange:this.handleChange}),r.a.createElement("div",{className:"check-box__view"}),r.a.createElement("span",{className:"check-box__text"},this.props.text))}}]),n}(r.a.Component)),w=[{text:"\u0432\u0441\u0435",name:"all"},{text:"\u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",name:"0"},{text:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",name:"1"},{text:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",name:"2"},{text:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",name:"3"}],I=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"stops-filter"},r.a.createElement("h4",{className:"stops-filter__title"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),w.map((function(t,n){return r.a.createElement("div",{className:"stops-filter__item",key:t.text},r.a.createElement(y,{name:t.name,text:t.text,checked:e.props.stopsFilter[t.name],onChange:e.handleChange}))})))}}]),n}(r.a.Component),F=(n(29),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={sortIndex:1,stopsFilter:{all:!1,0:!0,1:!1,2:!1,3:!1}},a.handleSortIndexChange=a.handleSortIndexChange.bind(Object(h.a)(a)),a.handleStopsFilterChange=a.handleStopsFilterChange.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleSortIndexChange",value:function(e){this.setState({sortIndex:e})}},{key:"handleStopsFilterChange",value:function(e){this.setState({stopsFilter:Object(o.a)({},this.state.stopsFilter,Object(i.a)({},e,!this.state.stopsFilter[e]))})}},{key:"render",value:function(){return r.a.createElement("main",{className:"page"},r.a.createElement("div",{className:"page__logo"},r.a.createElement("img",{src:"main-logo.svg",alt:"main-logo"})),r.a.createElement("div",{className:"page__tickets"},r.a.createElement(x,{filter:this.state.stopsFilter,sort:this.state.sortIndex})),r.a.createElement("div",{className:"page__sort-filter"},r.a.createElement(N,{sortIndex:this.state.sortIndex,onChange:this.handleSortIndexChange})),r.a.createElement("div",{className:"page__stops-filter"},r.a.createElement(I,{stopsFilter:this.state.stopsFilter,onChange:this.handleStopsFilterChange})))}}]),n}(r.a.Component));var S=function(){return r.a.createElement(F,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[12,1,2]]]);
//# sourceMappingURL=main.127c6468.chunk.js.map